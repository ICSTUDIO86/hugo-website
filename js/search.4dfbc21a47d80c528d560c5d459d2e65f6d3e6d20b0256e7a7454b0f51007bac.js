(()=>{var c=null;async function h(){try{c=await(await fetch("/index.json")).json(),console.log("\u641C\u7D22\u6570\u636E\u5DF2\u52A0\u8F7D\uFF0C\u5171",c.length,"\u6761\u8BB0\u5F55"),console.log("\u793A\u4F8B\u6570\u636E:",c.slice(0,2))}catch(t){console.error("\u641C\u7D22\u6570\u636E\u52A0\u8F7D\u5931\u8D25:",t)}}function a(t){return!c||!t.trim()?[]:c.filter(s=>[s.title||"",s.content||"",s.summary||""].join(" ").toLowerCase().includes(t.toLowerCase())).sort((s,i)=>{let e=(s.title||"").toLowerCase(),r=(i.title||"").toLowerCase(),n=t.toLowerCase();return e.includes(n)&&!r.includes(n)?-1:!e.includes(n)&&r.includes(n)?1:0})}function u(t,o){let s=document.getElementById("search-results");if(s||(s=document.createElement("div"),s.id="search-results",s.className="absolute top-full left-0 right-0 bg-white border border-zinc-200 rounded-lg shadow-lg mt-1 max-h-96 overflow-y-auto z-50",document.getElementById("search").appendChild(s)),t.length===0){s.innerHTML=`
            <div class="p-4 text-gray-500 text-center">
                \u672A\u627E\u5230\u4E0E"${o}"\u76F8\u5173\u7684\u7ED3\u679C
            </div>
        `,s.style.display="block";return}let i=t.slice(0,8).map(e=>`
        <a href="${e.href}" class="block p-4 border-b border-gray-100 hover:bg-gray-50 transition-colors">
            <div class="font-semibold text-gray-800 mb-1">${e.title}</div>
            <div class="text-sm text-gray-600 mb-1">${e.type} \u2022 ${e.date}</div>
            <div class="text-sm text-gray-500 line-clamp-2">${e.summary||e.content.substring(0,150)}...</div>
        </a>
    `).join("");s.innerHTML=i,s.style.display="block"}function d(){let t=document.getElementById("search-results");t&&(t.style.display="none")}function y(){let t=document.getElementById("search"),o=t.querySelector('input[type="text"]'),s=t.querySelector("button");o.placeholder="\u641C\u7D22\u6587\u7AE0\u5185\u5BB9...";let i;o.addEventListener("input",e=>{clearTimeout(i);let r=e.target.value.trim();if(r.length<2){d();return}i=setTimeout(()=>{let n=a(r);u(n,r)},300)}),t.addEventListener("submit",e=>{e.preventDefault();let r=o.value.trim();if(r.length>=2){let n=a(r);u(n,r)}}),document.addEventListener("click",e=>{t.contains(e.target)||d()}),o.addEventListener("keydown",e=>{let r=document.getElementById("search-results");if(!r||r.style.display==="none")return;let n=r.querySelectorAll("a"),l=Array.from(n).findIndex(m=>m.classList.contains("bg-blue-50"));e.key==="ArrowDown"?(e.preventDefault(),l>=0&&n[l].classList.remove("bg-blue-50"),l=(l+1)%n.length,n[l].classList.add("bg-blue-50")):e.key==="ArrowUp"?(e.preventDefault(),l>=0&&n[l].classList.remove("bg-blue-50"),l=l<=0?n.length-1:l-1,n[l].classList.add("bg-blue-50")):e.key==="Enter"&&l>=0&&(e.preventDefault(),n[l].click())})}document.addEventListener("DOMContentLoaded",()=>{h(),y()});})();
