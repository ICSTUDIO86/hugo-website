# 安全注意事项

## ⚠️ 重要安全提醒

### 1. API 密钥安全
当前配置文件（`cloudbase.json` 和 `cloudbase-hybrid.json`）包含硬编码的API密钥：
- `ZPAY_API_KEY`: Mayyi9iRDdHg8g0Thyg3YQYcUhfXc24A
- `ZPAY_MERCHANT_ID`: 2025090607243839

**在生产环境部署前必须**：
1. 将这些敏感信息移至环境变量
2. 使用 `.env` 文件或CloudBase环境变量配置
3. 确保 `.env` 文件不被提交到版本控制

### 2. 生产环境建议
1. **更换所有测试密钥**为生产环境密钥
2. **启用CloudBase访问控制**，限制函数调用权限
3. **配置CORS策略**，限制允许的域名
4. **启用请求频率限制**，防止滥用
5. **配置SSL证书**，确保HTTPS访问

### 3. 代码安全检查
- ✅ 已清理所有console.log调试输出
- ✅ 已移除硬编码的测试访问码
- ✅ 已实施访问码格式验证
- ⚠️ 需要将API密钥移至环境变量

### 4. 部署前清单
- [ ] 更新所有API密钥为生产环境密钥
- [ ] 配置环境变量而非硬编码
- [ ] 测试CloudBase函数访问控制
- [ ] 验证CORS设置
- [ ] 启用日志监控和告警

### 5. 监控建议
定期检查以下日志：
- `error-logs` 集合：系统错误日志
- `access-logs` 集合：访问尝试日志
- CloudBase函数调用日志

如发现异常访问模式，及时调整安全策略。