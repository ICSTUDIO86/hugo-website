{
  "envId": "cloud1-4g1r5ho01a0cfd85",
  "region": "ap-shanghai",
  "functionRoot": "./functions",
  "functions": [
    {
      "name": "zpay-callback",
      "config": {
        "timeout": 20,
        "runtime": "Nodejs16.13",
        "memorySize": 256,
        "envVariables": {
          "ZPAY_API_KEY": "UoA5vDBCe51EyVzdK2Fu2udBO1SAadjN",
          "ZPAY_MERCHANT_ID": "2025090607243839",
          "TCB_ENV": "cloud1-4g1r5ho01a0cfd85",
          "CORS_ORIGIN": "*"
        }
      },
      "triggers": [
        {
          "name": "httpTrigger",
          "type": "http",
          "config": {
            "path": "/zpay-callback",
            "method": ["POST", "GET"],
            "cors": {
              "origin": "*",
              "allowCredentials": false,
              "allowMethods": ["GET", "POST", "OPTIONS"],
              "allowHeaders": ["Content-Type", "Authorization", "X-Requested-With"]
            }
          }
        }
      ],
      "description": "Z-pay 支付回调处理 (混合架构)",
      "handler": "index.main",
      "ignore": [
        "node_modules/**/*",
        ".git/**/*",
        "*.zip"
      ]
    },
    {
      "name": "generate-access-code",
      "config": {
        "timeout": 10,
        "runtime": "Nodejs16.13",
        "memorySize": 256,
        "envVariables": {
          "TCB_ENV": "cloud1-4g1r5ho01a0cfd85",
          "CORS_ORIGIN": "*"
        }
      },
      "triggers": [
        {
          "name": "httpTrigger", 
          "type": "http",
          "config": {
            "path": "/generate-access-code",
            "method": ["POST", "OPTIONS"],
            "cors": {
              "origin": "*",
              "allowCredentials": false,
              "allowMethods": ["POST", "OPTIONS"],
              "allowHeaders": ["Content-Type", "Authorization", "X-Requested-With"]
            }
          }
        }
      ],
      "description": "生成和验证访问码 (混合架构)",
      "handler": "index.main",
      "ignore": [
        "node_modules/**/*",
        ".git/**/*",
        "*.zip"
      ]
    }
  ],
  "databases": [
    {
      "collectionName": "ic_studio_orders",
      "description": "视奏工具订单数据"
    },
    {
      "collectionName": "access_logs",
      "description": "访问日志数据"
    }
  ]
}